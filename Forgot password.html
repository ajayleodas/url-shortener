<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forgot Password</title>
  <link rel="stylesheet" href="D:\URL\forgot password.css">
</head>
<body>

  <div class="container">
    <h1>üîë <span>Forgot Password</span></h1>
    <p>Enter your registered email to receive an OTP for verification.</p>

    <form id="forgotForm" onsubmit="sendOTP(); return false;">
      <label for="email">Email</label>
      <input type="email" id="email" placeholder="Enter your email" required>

      <button type="submit" id="sendOtpBtn">Send OTP üîÑ</button>
    </form>

    <!-- OTP Section (Hidden initially) -->
    <form id="otpForm" style="display:none;" onsubmit="verifyOTP(); return false;">
      <label for="otp">Enter OTP</label>
      <input type="text" id="otp" maxlength="6" placeholder="Enter 6-digit OTP" required>

      <button type="submit">Verify OTP ‚úÖ</button>
      <p style="margin-top:10px;">
        Didn‚Äôt get OTP? <a href="#" onclick="resendOTP()">Resend</a>
      </p>
    </form>

    <!-- After OTP verified -->
    <form id="resetForm" style="display:none;" onsubmit="resetPassword(); return false;">
      <label for="newPassword">New Password</label>
      <input type="password" id="newPassword" placeholder="Enter new password" required>

      <label for="confirmPassword">Confirm Password</label>
      <input type="password" id="confirmPassword" placeholder="Confirm new password" required>

      <button type="submit">Reset Password üîê</button>
    </form>

    <p style="margin-top: 15px;">
      <a href="login.html">‚¨Ö Back to Login</a>
    </p>
  </div>

  <script>
    let generatedOTP = "";

    function sendOTP() {
      const email = document.getElementById("email").value.trim();
      if (!email) {
        alert("‚ö†Ô∏è Please enter your registered email!");
        return;
      }

      // Simulate OTP generation
      generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
      console.log("Generated OTP:", generatedOTP); // (for testing)
      alert(`üìß OTP sent to ${email}`);

      // Hide email form & show OTP form
      document.getElementById("forgotForm").style.display = "none";
      document.getElementById("otpForm").style.display = "block";
    }

    function verifyOTP() {
      const otp = document.getElementById("otp").value.trim();

      if (otp.length !== 6 || isNaN(otp)) {
        alert("‚ö†Ô∏è Please enter a valid 6-digit OTP!");
        return;
      }

      if (otp === generatedOTP) {
        alert("‚úÖ OTP verified successfully!");
        document.getElementById("otpForm").style.display = "none";
        document.getElementById("resetForm").style.display = "block";
      } else {
        alert("‚ùå Incorrect OTP! Please try again.");
      }
    }

    function resendOTP() {
      generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
      console.log("Resent OTP:", generatedOTP); // (for testing)
      alert("üì® A new OTP has been sent to your email!");
    }

    function resetPassword() {
      const newPass = document.getElementById("newPassword").value;
      const confirmPass = document.getElementById("confirmPassword").value;

      if (newPass !== confirmPass) {
        alert("‚ùå Passwords do not match!");
        return;
      }

      alert("‚úÖ Password reset successful!");
      window.location.href = "login.html";
    }
  </script>

</body>
</html>
